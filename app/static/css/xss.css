:root{
  --bg1:#071322; --bg2:#071029; --accent:#7be0ff; --accent2:#ff7bbf; --pixel:#dff8ff;
  --kny-red: #8B0000; --kny-gold: #D4AF37; --kny-black: #1a1a1a;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  font-family:'Press Start 2P', monospace;
  color:var(--pixel);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  overflow:hidden;
  position: relative;
}

/* 鬼灭之刃风格背景 */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url('/static/img/test_bg.png'), url('/static/img/test_bg.jpg'), url('/static/img/test_bg.jpeg'), url('/static/img/test_bg.webp'), url('/static/img/test_bg.gif');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  opacity: 0.85;
  z-index: 0;
  filter: brightness(0.9) contrast(1.1);
}

/* 传统日式纹样边框叠加层 */
body::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    repeating-linear-gradient(0deg, transparent, transparent 35px, rgba(212, 175, 55, 0.03) 35px, rgba(212, 175, 55, 0.03) 36px),
    repeating-linear-gradient(90deg, transparent, transparent 35px, rgba(212, 175, 55, 0.03) 35px, rgba(212, 175, 55, 0.03) 36px);
  z-index: 1;
  pointer-events: none;
  box-shadow: inset 0 0 100px rgba(139, 0, 0, 0.2);
  border: 8px solid transparent;
  border-image: repeating-linear-gradient(45deg, var(--kny-gold) 0, var(--kny-gold) 10px, transparent 10px, transparent 20px) 20;
}

/* canvas 背景 */
.particle-canvas{
  position:fixed; inset:0; z-index:2; display:block;
  image-rendering: pixelated;
  opacity: 0.4;
}

/* 居中面板 */
.wrap{position:relative; z-index:10; height:100%; display:flex; align-items:center; justify-content:center; padding:24px;}
.pixel-panel{
  width:100%; max-width:920px; 
  background: linear-gradient(135deg, rgba(26, 26, 26, 0.75) 0%, rgba(139, 0, 0, 0.15) 100%);
  backdrop-filter: blur(12px) saturate(150%);
  border:6px solid rgba(212, 175, 55, 0.6);
  padding:20px; border-radius:16px; 
  box-shadow: 
    0 20px 60px rgba(0,0,0,0.8),
    inset 0 0 60px rgba(212, 175, 55, 0.05),
    0 0 120px rgba(139, 0, 0, 0.3);
  display:grid; grid-template-columns:120px 1fr; gap:18px; align-items:center;
  position: relative;
  animation: cardShine 8s ease-in-out infinite;
}

@keyframes cardShine {
  0%, 100% { box-shadow: 0 20px 60px rgba(0,0,0,0.8), inset 0 0 60px rgba(212, 175, 55, 0.05), 0 0 120px rgba(139, 0, 0, 0.3); }
  50% { box-shadow: 0 20px 60px rgba(0,0,0,0.8), inset 0 0 60px rgba(212, 175, 55, 0.15), 0 0 150px rgba(212, 175, 55, 0.5); }
}

/* 头部 */
.panel-head{grid-column:2; margin-bottom:6px}
.logo{
  font-size:20px; 
  color:var(--kny-gold); 
  letter-spacing:1px;
  text-shadow: 
    2px 2px 4px rgba(0,0,0,0.8),
    0 0 20px rgba(212, 175, 55, 0.6),
    0 0 40px rgba(212, 175, 55, 0.3);
  font-weight: bold;
}
.sub{
  font-size:10px; 
  color:rgba(255,255,255,0.9); 
  margin-top:6px;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
}

/* 二次元吉祥物展示卡 */
.mascot{
  display:flex;
  align-items:center;
  justify-content:center;
  grid-column:1;
  position:relative;
  padding:10px 0 32px;
}
.mascot-frame{
  position:relative;
  width:160px;
  height:220px;
  padding:16px;
  border-radius:20px;
  background:linear-gradient(140deg, rgba(139, 0, 0, 0.85) 0%, rgba(26, 26, 26, 0.9) 60%, rgba(212, 175, 55, 0.55) 100%);
  border:3px solid rgba(212, 175, 55, 0.8);
  box-shadow:
    0 26px 60px rgba(0,0,0,0.75),
    0 0 60px rgba(212, 175, 55, 0.35);
  overflow:visible;
  animation: float 4s ease-in-out infinite;
}
.mascot-frame::before{
  content:'';
  position:absolute;
  inset:10px;
  border-radius:16px;
  border:2px solid rgba(212, 175, 55, 0.35);
  background:linear-gradient(45deg, rgba(255,255,255,0.12), rgba(255,255,255,0));
  box-shadow: inset 0 0 40px rgba(212, 175, 55, 0.18);
  pointer-events:none;
}
.mascot-frame::after{
  content:'';
  position:absolute;
  inset:0;
  pointer-events:none;
  background:repeating-linear-gradient(60deg, rgba(255,255,255,0.08) 0, rgba(255,255,255,0.08) 4px, transparent 4px, transparent 12px);
  mix-blend-mode: screen;
  opacity:0.2;
}
.mascot-card{
  position:relative;
  width:100%;
  height:100%;
  border-radius:16px;
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  filter:saturate(1.2) contrast(1.05);
  box-shadow: inset 0 0 45px rgba(0,0,0,0.55);
}
.mascot-ribbon{
  position:absolute;
  bottom:-18px;
  left:50%;
  transform:translateX(-50%);
  background:linear-gradient(135deg, rgba(212, 175, 55, 0.95) 0%, rgba(139,0,0,0.9) 100%);
  color:#1a1a1a;
  padding:6px 18px;
  border-radius:999px;
  border:2px solid rgba(255,255,255,0.4);
  font-size:11px;
  letter-spacing:2px;
  text-transform:uppercase;
  text-shadow:1px 1px 2px rgba(255,255,255,0.4);
  box-shadow:0 10px 25px rgba(0,0,0,0.45);
}

/* 控件 */
.controls{grid-column:2; display:flex; flex-direction:column; gap:10px}
.pixel-input{
  font-family:inherit; font-size:10px; padding:12px 10px; border-radius:6px;
  background:rgba(26, 26, 26, 0.75); 
  color:#fff; 
  border:3px solid rgba(212, 175, 55, 0.4);
  outline:none; width:100%; 
  box-shadow: inset 0 -6px 12px rgba(0,0,0,0.5), 0 0 20px rgba(212, 175, 55, 0.1);
  backdrop-filter: blur(5px);
}
.pixel-input:focus{ 
  border-color:var(--kny-gold); 
  box-shadow:0 0 0 4px rgba(212, 175, 55, 0.2), inset 0 -6px 12px rgba(0,0,0,0.5);
}

.btn-row{display:flex; gap:10px}
.pixel-btn{
  font-family:inherit; font-size:10px; padding:12px 16px; border-radius:6px;
  background:linear-gradient(135deg, var(--kny-red) 0%, var(--kny-gold) 100%);
  color:#fff; 
  border:2px solid rgba(212, 175, 55, 0.6); 
  cursor:pointer;
  box-shadow: 
    0 10px 24px rgba(139, 0, 0, 0.5),
    inset 0 1px 0 rgba(255,255,255,0.2); 
  transition: all .2s;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  font-weight: bold;
}
.pixel-btn:hover{ 
  transform: translateY(-4px) scale(1.05);
  box-shadow: 
    0 15px 35px rgba(139, 0, 0, 0.7),
    0 0 40px rgba(212, 175, 55, 0.6),
    inset 0 1px 0 rgba(255,255,255,0.3);
}
.pixel-btn.alt{ 
  background:linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(60, 60, 60, 0.8) 100%);
  color:var(--kny-gold); 
  border:2px solid rgba(212, 175, 55, 0.4);
  box-shadow: 0 10px 24px rgba(0,0,0,0.5);
}

/* 结果区 */
.result{
  grid-column:1/3; 
  background:rgba(26, 26, 26, 0.85); 
  backdrop-filter: blur(8px);
  padding:12px; 
  border-radius:6px; 
  min-height:80px; 
  font-size:10px; 
  color:#fff; 
  white-space:pre-wrap;
  border:2px solid rgba(212, 175, 55, 0.3);
  box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);
}
.result.error{ 
  border:3px solid rgba(139, 0, 0, 0.8); 
  animation:shake .48s;
  background:rgba(139, 0, 0, 0.2);
  box-shadow: 
    inset 0 2px 10px rgba(139, 0, 0, 0.5),
    0 0 30px rgba(139, 0, 0, 0.4);
}

/* footer */
.panel-foot{grid-column:1/3; display:flex; justify-content:space-between; margin-top:6px}
.link{
  color:rgba(212, 175, 55, 0.95); 
  text-decoration:none; 
  font-size:10px; 
  opacity:0.95;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  transition: all 0.3s;
}
.link:hover {
  color:rgba(212, 175, 55, 1);
  text-shadow: 
    1px 1px 2px rgba(0,0,0,0.8),
    0 0 10px rgba(212, 175, 55, 0.8);
}

/* 小动画 */
@keyframes float{ 0%{transform:translateY(0)} 50%{transform:translateY(-8px)} 100%{transform:translateY(0)}}
@keyframes shake{
  10%,90%{transform:translateX(-3px)}
  20%,80%{transform:translateX(6px)}
  30%,50%,70%{transform:translateX(-6px)}
}

/* 响应 */
@media (max-width:780px){
  .pixel-panel{ grid-template-columns:1fr; padding:12px; gap:12px }
  .mascot{order: -1; grid-column:1}
}